!function(h){h(function(){var e=h("#name"),l=h("#date"),a=h("#tel"),i=h("#mail"),s=h("#city_input"),r=h("#city_input_form"),d=h("#text"),c=/^[a-zа-яё]{2,}$/i,u=/^\d\d[.,]\d\d[.,]\d{4}$/,p=/\+\d{1,4}\(?\d{3}\)?\d{3}-?\d{4}\b/,f=/(^\w+(|(.|-)\w+))(?=@[a-z]{2,}\.[a-z]{2,4}\b)/i,v=/\w+|[а-яё]+[,.!?@:;]*/gi,m=/^[а-яё]+$/i;h('input[type="submit"]').on("click",function(){function n(t,e){h("#dialog").append(t).dialog({width:"404px",buttons:{OK:function(){h(this).dialog("close"),h("#dialog").remove()}},modal:!0,title:e})}h("#fieldsetInput").append(h('<div id="dialog" >'));var o=0;function t(t,e){if(t.test(e.val())){if(e===l){var a=l.val().split(/[,.]/),i=a[0],s=a[1],r=a[2];if(2010<=r||r<1900||12<s||s<0||31<i||i<0)return void l.effect("bounce",{times:3},"slow").parent().addClass("wrong_date")}e.removeClass("false").parent().removeClass("wrong_date"),6===++o&&h(".contacts").addClass("data_transfer").delay(1e3).queue(function(){h(this).removeClass("data_transfer"),n(h("<div >").html("Your message successfully send!"),"Success!"),h(".input_fields input").val(""),h(this).dequeue()})}else{e.addClass("false").effect("shake",{times:3},"slow"),n(h("<div />").html('Check out the "<span>'+e.prev().text()+'</span>" field'),"Error!")}}t(c,e),t(p,a),t(f,i),t(u,l),t(v,d),t(m,s)}),s.on("keyup",function(){if(m.test(this.value)){if(r.removeClass("wrong_input"),r.removeClass("wrong_city"),h("#city_list").remove(),2<s.val().length){var i=[];h.ajax({url:"http://api.spacenear.ru/index.php",type:"POST",data:{pattern:this.value},dataType:"json",success:function(t){t&&(i=t.map(function(t){return t.name}))},error:function(){console.log("error!")},xhr:function(){var t=h.ajaxSettings.xhr();return t.upload.onprogress=function(){h(".loader").show()},t}}).done(function(){if(h(".loader").hide(),!h("#city_list").length&&0<i.length){for(var t=h("<select />").attr({id:"city_list",size:function(){return 2<i.length?i.length:2}}).hide(),e=0;e<i.length;e++){var a=h("<option />");a.attr("value",i[e]).text(i[e]).dblclick(function(){s.val(this.value),h(this).parent().slideUp(function(){h(this).remove()})}),t.append(a)}r.append(t),h(t).slideDown()}else 0===i.length&&(r.addClass("wrong_city"),h("#city_list").slideUp(function(){h(this).remove()}))})}}else r.addClass("wrong_input"),h("#city_list").slideUp(function(){h(this).remove()})}),h('input[type="reset"]').on("click",function(){h(".input_fields input").removeClass("false"),l.parent().removeClass("wrong_date"),r.removeClass("wrong_input")}),l.datepicker({firstDay:1,dateFormat:"dd.mm.yy",monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dayNamesMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],maxDate:"-8y"})})}(jQuery),function(a){a(function(){var t;!function(){var t=a("<div >").addClass("carousel");for(a(".carousel_block").append(t),i=1;i<=10;i++){var e=a("<div >").addClass("item");3<i?e.attr("visible",!1).hide():e.attr("visible",!0),e.html("<span>Item №"+i+'</span><p>Cost: <span class="item_cost">'+100*i+"</span></p>"),e.attr("id","item"+i),e.draggable({revert:!0,start:function(){a(".cart").addClass("drag_to_cart")},stop:function(){a(".cart").removeClass("drag_to_cart")}}),t.append(e)}}(),a(".cart").droppable({over:function(t,e){e.draggable.addClass("item_over_cart")},out:function(t,e){e.draggable.removeClass("item_over_cart")},hoverClass:"overcart",drop:function(t,e){totalSum=parseInt(a(".total_sum").text(),10),itemSum=parseInt(e.draggable.find(".item_cost").text(),10),totalItems=parseInt(a(".total_items").text(),10),a(".total_items").text(totalItems+1),a(".total_sum").text(itemSum+totalSum),e.draggable.removeClass("item_over_cart")}}),(t=a("<div >").addClass("arrow")).clone().attr("id","arrow_left").prependTo(".carousel_block"),t.clone().attr("id","arrow_right").appendTo(".carousel_block"),a("#arrow_right").on("click",function(){a(".carousel").children(":first").hide("drop").appendTo(".carousel").attr("visible",!1),a(".carousel").children("[visible=false]:first").effect("slide",{direction:"right"}).attr("visible",!0)}),a("#arrow_left").on("click",function(){a(".carousel").children("[visible=true]:last").hide("drop",{direction:"right"}).attr("visible",!1),a(".carousel").children("[visible=false]:last").prependTo(".carousel").attr("visible",!0).show("slide")})})}(jQuery);