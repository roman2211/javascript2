$(document).ready(function(){$(".select-box-it").selectBoxIt({downArrowIcon:"icon-hand-down"}),$(".slide-two").owlCarousel({items:1,loop:!0,center:!1,rewind:!1,mouseDrag:!0,touchDrag:!0,pullDrag:!0,freeDrag:!1,margin:0,stagePadding:0,autoplay:!0,autoplayTimeout:5e3,autoplayHoverPause:!1,autoplaySpeed:!1,merge:!1,mergeFit:!0,autoWidth:!1,startPosition:0,rtl:!1,smartSpeed:250,fluidSpeed:!1,dragEndSpeed:!1,responsive:{},responsiveRefreshRate:200,responsiveBaseElement:window,fallbackEasing:"swing",info:!1,nestedItemSelector:!1,itemElement:"div",stageElement:"div",refreshClass:"owl-refresh",loadedClass:"owl-loaded",loadingClass:"owl-loading",rtlClass:"owl-rtl",responsiveClass:"owl-responsive",dragClass:"owl-drag",itemClass:"owl-item",stageClass:"owl-stage",stageOuterClass:"owl-stage-outer",grabClass:"owl-grab"}),$(".slide-one").owlCarousel({items:1,loop:!0,center:!1,rewind:!1,mouseDrag:!0,touchDrag:!0,pullDrag:!0,freeDrag:!1,margin:0,stagePadding:0,autoplay:!1,autoplayTimeout:5e3,autoplayHoverPause:!1,autoplaySpeed:!1,merge:!1,mergeFit:!0,autoWidth:!1,startPosition:0,rtl:!1,smartSpeed:250,fluidSpeed:!1,dragEndSpeed:!1,responsive:{},responsiveRefreshRate:200,responsiveBaseElement:window,fallbackEasing:"swing",info:!1,nestedItemSelector:!1,itemElement:"div",stageElement:"div",refreshClass:"owl-refresh",loadedClass:"owl-loaded",loadingClass:"owl-loading",rtlClass:"owl-rtl",responsiveClass:"owl-responsive",dragClass:"owl-drag",itemClass:"owl-item",stageClass:"owl-stage",stageOuterClass:"owl-stage-outer",grabClass:"owl-grab",nav:!0,navText:["",""],navSpeed:!1,navElement:"div",navContainer:!1,navContainerClass:"owl-nav",navClass:["owl-prev","owl-next"],slideBy:1,dotClass:"owl-dot",dotsClass:"owl-dots",dots:!0,dotsEach:!1,dotsData:!1,dotsSpeed:!1,dotsContainer:!1}),$("#slider-range").slider({range:!0,min:0,max:1e3,values:[52,400],slide:function(e,t){$("#amount").val("$"+t.values[0]+" - $"+t.values[1])}}),$("#amount").val("$"+$("#slider-range").slider("values",0)+" - $"+$("#slider-range").slider("values",1))}),function(l){l(function(){var e=/^[а-яё]+$/i,o=l("#city_input"),n=l("#city_input_form");o.on("keyup",function(){if(e.test(this.value)){if(n.removeClass("wrong_input"),n.removeClass("wrong_city"),l("#city_list").remove(),2<o.val().length){var s=[];l.ajax({url:"http://api.spacenear.ru/index.php",type:"POST",beforeSend:function(){l(".acc__label_loader").show()},data:{pattern:this.value},dataType:"json",success:function(e){e&&(console.log(e),s=e.map(function(e){return e.name}))},error:function(){console.log("Error")}}).done(function(){if(l(".acc__label_loader").hide(),!l("#city_list").length&&0<s.length){for(var e=l("<select />").attr({id:"city_list",size:function(){return 2<s.length?s.length:2}}).hide(),t=0;t<s.length;t++){var a=l("<option />");a.attr("value",s[t]).text(s[t]).dblclick(function(){o.val(this.value),l(this).parent().slideUp(function(){l(this).remove()})}),e.append(a)}n.append(e),l(e).slideDown()}else 0===s.length&&(n.addClass("wrong_city"),l("#city_list").slideUp(function(){l(this).remove()}))})}}else n.addClass("wrong_input"),l("#city_list").slideUp(function(){l(this).remove()})})})}(jQuery),function(c){c(function(){var t="http://localhost:3000/cart";function a(e){if(e.length){for(var t=0,a=0;a<e.length;a++){var s=c("<div />").addClass("gooditem_incart").attr({productId:e[a].productId,id:e[a].id}),o=c("<div />").addClass("image").css("background-image",e[a].imgURL),n=c("<div />").addClass("item_cross").click(d),l=c("<div />").text(e[a].productName),i=c("<p />").addClass("item_cost").text(e[a].price),r=c("<a href=# />").append(l,i,c("<div >"));s.append(o,n,r),c(".shp_cart__list").append(s),t+=parseInt(e[a].price)}c(".shp_cart__empty").hide(),c(".shp_cart__total").show().children("span").text(t),c(".shp_cart__checkout, .shp_cart__gotocart").show(),c(".items_number").show().text(e.length)}else c(".shp_cart__empty").show(),c(".shp_cart__checkout, .shp_cart__gotocart").hide(),c(".items_number").hide(),c(".shp_cart__total").hide()}function s(){c.get({url:t}).done(function(e){c(".shp_cart__list").empty(),a(e),o(e),c(".shp_cart__list").removeClass("cart__list_loading")})}function o(e){c(".showcase")&&(c(".gooditem").removeClass("showcase__loading incart"),Object.keys(e).forEach(function(e){c('.gooditem[productId="'+this[e].productId+'"]').addClass("incart")},e))}function d(){c.ajax({method:"DELETE",url:t+"/"+c(this).parent().attr("id"),beforeSend:function(){c(".shp_cart__list").addClass("cart__list_loading")}}).done(function(){s()})}c.get({url:t,beforeSend:function(){c(".showcase")&&c(".gooditem").addClass("showcase__loading")}}).done(function(e){c(".shp_cart__loading").hide(),o(e),a(e)}),c(".showcase")&&c(".addtocart_button").click(function(){var e=c(this);e.parent().hasClass("incart")||c.post({url:t,beforeSend:function(){e.parent().toggleClass("showcase__loading")},data:{productId:e.parent().attr("productId"),price:e.next().children(".item_cost").text(),imgURL:e.prev().css("background-image"),productName:e.next().children(":first").text()}}).done(function(){e.parent().addClass("incart").toggleClass("showcase__loading"),s()})})})}(jQuery);